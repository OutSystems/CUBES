[info] Parsing specification...
[info] Parsing specification...
[debug] Reading input files...
[info] Parsing specification...
[debug] Reading input files...
[info] Parsing specification...
[info] Parsing specification...
[debug] Reading input files...
[debug] Reading input files...
[debug] Generating DSL...
[debug] Reading input files...
[debug] Generating DSL...
[info] Parsing succeeded
[info] Building synthesizer...
[info] Lines of Code: 1
[info] Parsing succeeded
[info] Building synthesizer...
[info] Lines of Code: 1
[debug] Generating DSL...
[debug] Generating DSL...
[debug] Generating DSL...
[info] Parsing succeeded
[info] Building synthesizer...
[info] Lines of Code: 1
[info] Parsing succeeded
[info] Building synthesizer...
[info] Lines of Code: 1
[info] Parsing succeeded
[info] Building synthesizer...
[info] Lines of Code: 1
[error] Number of Nodes: 5 
[error] Number of Variables: 6
[error] Number of Constraints: 55
[error] Time spent encoding: 0.04292917251586914
[error] Number of Nodes: 5 
[error] Number of Variables: 6
[error] Number of Constraints: 55
[error] Time spent encoding: 0.041166067123413086
[error] UNSAT : There is no solution for current depth (loc=0), try to increase it (e.g. loc=1).
[info] Synthesizing programs...
[error] Total Time: 5.078315734863281e-05
[error] Total Solver Time: 3.266334533691406e-05
[error] Total Time Symmetries: 0
[error] Total Blocked Models: 0
[info] No more queries to be tested. Solution not found!
[info] Increasing the number of lines of code.
[info] Lines of Code: 2
[error] UNSAT : There is no solution for current depth (loc=0), try to increase it (e.g. loc=1).
[info] Synthesizing programs...
[error] Total Time: 0.007763862609863281
[error] Total Solver Time: 0.007741689682006836
[error] Total Time Symmetries: 0
[error] Total Blocked Models: 0
[info] No more queries to be tested. Solution not found!
[info] Increasing the number of lines of code.
[info] Lines of Code: 2
[error] Number of Nodes: 5 
[error] Number of Variables: 6
[error] Number of Constraints: 55
[error] Time spent encoding: 0.03691720962524414
[error] UNSAT : There is no solution for current depth (loc=0), try to increase it (e.g. loc=1).
[info] Synthesizing programs...
[error] Total Time: 4.315376281738281e-05
[error] Total Solver Time: 2.8133392333984375e-05
[error] Total Time Symmetries: 0
[error] Total Blocked Models: 0
[info] No more queries to be tested. Solution not found!
[info] Increasing the number of lines of code.
[info] Lines of Code: 2
[error] Number of Nodes: 5 
[error] Number of Variables: 6
[error] Number of Constraints: 55
[error] Number of Nodes: 5 
[error] Time spent encoding: 0.037670135498046875
[error] Number of Variables: 6
[error] Number of Constraints: 55
[error] Time spent encoding: 0.038210153579711914
[error] UNSAT : There is no solution for current depth (loc=0), try to increase it (e.g. loc=1).
[info] Synthesizing programs...
[error] UNSAT : There is no solution for current depth (loc=0), try to increase it (e.g. loc=1).
[error] Total Time: 4.1484832763671875e-05
[error] Total Solver Time: 2.6702880859375e-05
[info] Synthesizing programs...
[error] Total Time Symmetries: 0
[error] Total Blocked Models: 0
[info] No more queries to be tested. Solution not found!
[error] Total Time: 4.00543212890625e-05
[info] Increasing the number of lines of code.
[error] Total Solver Time: 2.574920654296875e-05
[info] Lines of Code: 2
[error] Total Time Symmetries: 0
[error] Total Blocked Models: 0
[info] No more queries to be tested. Solution not found!
[info] Increasing the number of lines of code.
[info] Lines of Code: 2
[error] Number of Nodes: 10 
[error] Number of Variables: 16
[error] Number of Constraints: 149
[error] Time spent encoding: 0.08435201644897461
[error] UNSAT : There is no solution for current depth (loc=1), try to increase it (e.g. loc=2).
[info] Synthesizing programs...
[error] Total Time: 3.218650817871094e-05
[error] Total Solver Time: 2.6464462280273438e-05
[error] Total Time Symmetries: 0
[error] Total Blocked Models: 0
[info] No more queries to be tested. Solution not found!
[info] Increasing the number of lines of code.
[info] Lines of Code: 3
[error] Number of Nodes: 10 
[error] Number of Variables: 16
[error] Number of Constraints: 149
[error] Time spent encoding: 0.08506393432617188
[error] Number of Nodes: 10 
[error] Number of Variables: 16
[error] Number of Constraints: 149
[error] Time spent encoding: 0.09253430366516113
[error] Number of Nodes: 10 
[error] Number of Variables: 16
[error] Number of Constraints: 149
[error] Time spent encoding: 0.08442139625549316
[error] Number of Nodes: 10 
[error] Number of Variables: 16
[error] Number of Constraints: 149
[error] Time spent encoding: 0.08572888374328613
[error] UNSAT : There is no solution for current depth (loc=1), try to increase it (e.g. loc=2).
[info] Synthesizing programs...
[error] Total Time: 3.814697265625e-05
[error] Total Solver Time: 3.1948089599609375e-05
[error] Total Time Symmetries: 0
[error] Total Blocked Models: 0
[info] No more queries to be tested. Solution not found!
[info] Increasing the number of lines of code.
[info] Lines of Code: 3
[error] UNSAT : There is no solution for current depth (loc=1), try to increase it (e.g. loc=2).
[info] Synthesizing programs...
[error] Total Time: 3.647804260253906e-05
[error] Total Solver Time: 3.0517578125e-05
[error] Total Time Symmetries: 0
[error] Total Blocked Models: 0
[info] No more queries to be tested. Solution not found!
[info] Increasing the number of lines of code.
[info] Lines of Code: 3
[error] UNSAT : There is no solution for current depth (loc=1), try to increase it (e.g. loc=2).
[info] Synthesizing programs...
[error] Total Time: 3.1948089599609375e-05
[error] Total Solver Time: 2.5987625122070312e-05
[error] Total Time Symmetries: 0
[error] Total Blocked Models: 0
[info] No more queries to be tested. Solution not found!
[info] Increasing the number of lines of code.
[info] Lines of Code: 3
[error] UNSAT : There is no solution for current depth (loc=1), try to increase it (e.g. loc=2).
[info] Synthesizing programs...
[error] Total Time: 0.01499032974243164
[error] Total Solver Time: 0.014977216720581055
[error] Total Time Symmetries: 0
[error] Total Blocked Models: 0
[info] No more queries to be tested. Solution not found!
[info] Increasing the number of lines of code.
[info] Lines of Code: 3
[error] Number of Nodes: 15 
[error] Number of Variables: 30
[error] Number of Constraints: 285
[error] Time spent encoding: 0.15327811241149902
[info] Synthesizing programs...
[error] Number of Nodes: 15 
[error] Number of Variables: 30
[error] Number of Constraints: 285
[error] Time spent encoding: 0.1532421112060547
[error] Number of Nodes: 15 
[error] Number of Variables: 30
[error] Number of Constraints: 285
[error] Time spent encoding: 0.1532731056213379
[error] Number of Nodes: 15 
[error] Number of Variables: 30
[error] Number of Constraints: 285
[error] Time spent encoding: 0.15544366836547852
[info] Synthesizing programs...
[info] Synthesizing programs...
[info] Synthesizing programs...
[error] Number of Nodes: 15 
[error] Number of Variables: 30
[error] Number of Constraints: 285
[error] Time spent encoding: 0.16031932830810547
[info] Synthesizing programs...
[error] Total Solver Time: 0.0643472671508789
[error] Total Time Symmetries: 0
[error] Total Blocked Models: 0
[error] Total Solver Time: 0.06609535217285156
[error] Total Time Symmetries: 0
[error] Total Blocked Models: 0
[error] Total Solver Time: 0.06069374084472656
[error] Total Time Symmetries: 0
[error] Total Blocked Models: 0
[error] Total Solver Time: 0.11355829238891602
[error] Total Time Symmetries: 0
[error] Total Blocked Models: 0
[error] Total Solver Time: 0.061165809631347656
[error] Total Time Symmetries: 0
[error] Total Blocked Models: 0
[error] Total Solver Time: 0.13000273704528809
[error] Total Time Symmetries: 0
[error] Total Blocked Models: 0
[error] Total Solver Time: 0.13130569458007812
[error] Total Time Symmetries: 0
[error] Total Blocked Models: 0
[error] Total Solver Time: 0.1212615966796875
[error] Total Time Symmetries: 0
[error] Total Blocked Models: 0
[error] Total Solver Time: 0.18753647804260254
[error] Total Time Symmetries: 0
[error] Total Blocked Models: 0
[error] Total Solver Time: 0.12171483039855957
[error] Total Time Symmetries: 0
[error] Total Blocked Models: 0
[error] Total Solver Time: 0.19381237030029297
[error] Total Time Symmetries: 0
[error] Total Blocked Models: 0
[error] Total Solver Time: 0.19615960121154785
[error] Total Time Symmetries: 0
[error] Total Blocked Models: 0
[error] Total Solver Time: 0.1824491024017334
[error] Total Time Symmetries: 0
[error] Total Blocked Models: 0
[error] Total Solver Time: 0.1830122470855713
[error] Total Time Symmetries: 0
[error] Total Blocked Models: 0
[error] Total Solver Time: 0.25933098793029785
[error] Total Time Symmetries: 0
[error] Total Blocked Models: 0
[error] Total Solver Time: 0.2580897808074951
[error] Total Time Symmetries: 0
[error] Total Blocked Models: 0
[error] Total Solver Time: 0.26180386543273926
[error] Total Time Symmetries: 0
[error] Total Blocked Models: 0
[error] Total Solver Time: 0.24431371688842773
[error] Total Time Symmetries: 0
[error] Total Blocked Models: 0
[error] Total Solver Time: 0.24419474601745605
[error] Total Time Symmetries: 0
[error] Total Blocked Models: 0
[error] Total Solver Time: 0.33204174041748047
[error] Total Time Symmetries: 0
[error] Total Blocked Models: 0
[error] Total Solver Time: 0.3224973678588867
[error] Total Time Symmetries: 0
[error] Total Blocked Models: 0
[error] Total Solver Time: 0.327103853225708
[error] Total Time Symmetries: 0
[error] Total Blocked Models: 0
[error] Total Solver Time: 0.30397701263427734
[error] Total Time Symmetries: 0
[error] Total Blocked Models: 0
[error] Total Solver Time: 0.3053288459777832
[error] Total Time Symmetries: 0
[error] Total Blocked Models: 0
[error] Total Solver Time: 0.4052751064300537
[error] Total Time Symmetries: 0
[error] Total Blocked Models: 0
[error] Total Solver Time: 0.38617467880249023
[error] Total Time Symmetries: 0
[error] Total Blocked Models: 0
[error] Total Solver Time: 0.3638112545013428
[error] Total Time Symmetries: 0
[error] Total Blocked Models: 0
[error] Total Solver Time: 0.3912491798400879
[error] Total Time Symmetries: 0
[error] Total Blocked Models: 0
[error] Total Solver Time: 0.3657410144805908
[error] Total Time Symmetries: 0
[error] Total Blocked Models: 0
[error] Total Solver Time: 0.48032593727111816
[error] Total Time Symmetries: 0
[error] Total Blocked Models: 0
[error] Total Solver Time: 0.42421913146972656
[error] Total Time Symmetries: 0
[error] Total Blocked Models: 0
[error] Total Solver Time: 0.4508779048919678
[error] Total Time Symmetries: 0
[error] Total Blocked Models: 0
[error] Total Solver Time: 0.42592835426330566
[error] Total Time Symmetries: 0
[error] Total Blocked Models: 0
[error] Total Time: 19.08565902709961
[error] Total Solver Time: 0.43698620796203613
[error] Total Time Symmetries: 0
[error] Total Blocked Models: 0
[info] No more queries to be tested. Solution not found!
[info] Increasing the number of lines of code.
[info] Lines of Code: 4
[error] Total Solver Time: 0.4536278247833252
[error] Total Time Symmetries: 0
[error] Total Blocked Models: 0
[error] Total Time: 19.21866536140442
[error] Total Solver Time: 0.46491003036499023
[error] Total Time Symmetries: 0
[error] Total Blocked Models: 0
[info] No more queries to be tested. Solution not found!
[info] Increasing the number of lines of code.
[info] Lines of Code: 4
[error] Total Solver Time: 0.5536947250366211
[error] Total Time Symmetries: 0
[error] Total Blocked Models: 0
[error] Number of Nodes: 20 
[error] Number of Variables: 48
[error] Number of Constraints: 463
[error] Time spent encoding: 0.24756574630737305
[info] Synthesizing programs...
[error] Number of Nodes: 20 
[error] Number of Variables: 48
[error] Number of Constraints: 463
[error] Time spent encoding: 0.24494695663452148
[info] Synthesizing programs...
[error] Total Time: 19.615911960601807
[error] Total Solver Time: 0.4380626678466797
[error] Total Time Symmetries: 0
[error] Total Blocked Models: 0
[info] No more queries to be tested. Solution not found!
[info] Increasing the number of lines of code.
[info] Lines of Code: 4
[error] Total Time: 19.709996938705444
[error] Total Solver Time: 0.4680159091949463
[error] Total Time Symmetries: 0
[error] Total Blocked Models: 0
[info] No more queries to be tested. Solution not found!
[info] Increasing the number of lines of code.
[info] Lines of Code: 4
[error] Number of Nodes: 20 
[error] Number of Variables: 48
[error] Number of Constraints: 463
[error] Time spent encoding: 0.24529361724853516
[error] Total Time: 19.81886911392212
[error] Total Solver Time: 0.5681455135345459
[error] Total Time Symmetries: 0
[error] Total Blocked Models: 0
[info] No more queries to be tested. Solution not found!
[info] Increasing the number of lines of code.
[info] Lines of Code: 4
[info] Synthesizing programs...
[error] Number of Nodes: 20 
[error] Number of Variables: 48
[error] Number of Constraints: 463
[error] Time spent encoding: 0.2458934783935547
[info] Synthesizing programs...
[error] Number of Nodes: 20 
[error] Number of Variables: 48
[error] Number of Constraints: 463
[error] Time spent encoding: 0.25624752044677734
[info] Synthesizing programs...
[error] Total Solver Time: 0.07438778877258301
[error] Total Time Symmetries: 0
[error] Total Blocked Models: 0
[error] Total Solver Time: 0.07198071479797363
[error] Total Time Symmetries: 0
[error] Total Blocked Models: 0
[error] Total Solver Time: 0.07573151588439941
[error] Total Time Symmetries: 0
[error] Total Blocked Models: 0
[error] Total Solver Time: 0.07705307006835938
[error] Total Time Symmetries: 0
[error] Total Blocked Models: 0
[error] Total Solver Time: 0.1513817310333252
[error] Total Time Symmetries: 0
[error] Total Blocked Models: 0
[error] Total Solver Time: 0.14837050437927246
[error] Total Time Symmetries: 0
[error] Total Blocked Models: 0
[error] Total Solver Time: 0.14178061485290527
[error] Total Time Symmetries: 0
[error] Total Blocked Models: 0
[error] Total Solver Time: 0.15195035934448242
[error] Total Time Symmetries: 0
[error] Total Blocked Models: 0
[error] Total Solver Time: 0.15280866622924805
[error] Total Time Symmetries: 0
[error] Total Blocked Models: 0
[error] Total Solver Time: 0.2372879981994629
[error] Total Time Symmetries: 0
[error] Total Blocked Models: 0
[error] Total Solver Time: 0.22166061401367188
[error] Total Time Symmetries: 0
[error] Total Blocked Models: 0
[error] Total Solver Time: 0.21666693687438965
[error] Total Time Symmetries: 0
[error] Total Blocked Models: 0
[error] Total Solver Time: 0.22613167762756348
[error] Total Time Symmetries: 0
[error] Total Blocked Models: 0
[error] Total Solver Time: 0.22976326942443848
[error] Total Time Symmetries: 0
[error] Total Blocked Models: 0
[error] Total Solver Time: 0.326568603515625
[error] Total Time Symmetries: 0
[error] Total Blocked Models: 0
[error] Total Solver Time: 0.2975316047668457
[error] Total Time Symmetries: 0
[error] Total Blocked Models: 0
[error] Total Solver Time: 0.29209423065185547
[error] Total Time Symmetries: 0
[error] Total Blocked Models: 0
[error] Total Solver Time: 0.30411386489868164
[error] Total Time Symmetries: 0
[error] Total Blocked Models: 0
[error] Total Solver Time: 0.30099940299987793
[error] Total Time Symmetries: 0
[error] Total Blocked Models: 0
[error] Total Solver Time: 0.43894076347351074
[error] Total Time Symmetries: 0
[error] Total Blocked Models: 0
[error] Total Solver Time: 0.3742382526397705
[error] Total Time Symmetries: 0
[error] Total Blocked Models: 0
[error] Total Solver Time: 0.3672308921813965
[error] Total Time Symmetries: 0
[error] Total Blocked Models: 0
[error] Total Solver Time: 0.37577080726623535
[error] Total Time Symmetries: 0
[error] Total Blocked Models: 0
[error] Total Solver Time: 0.3787848949432373
[error] Total Time Symmetries: 0
[error] Total Blocked Models: 0
[error] Total Solver Time: 0.5486860275268555
[error] Total Time Symmetries: 0
[error] Total Blocked Models: 0
[error] Total Solver Time: 0.44431114196777344
[error] Total Time Symmetries: 0
[error] Total Blocked Models: 0
[error] Total Solver Time: 0.44159603118896484
[error] Total Time Symmetries: 0
[error] Total Blocked Models: 0
[error] Total Solver Time: 0.45037245750427246
[error] Total Time Symmetries: 0
[error] Total Blocked Models: 0
[error] Total Solver Time: 0.4541025161743164
[error] Total Time Symmetries: 0
[error] Total Blocked Models: 0
[error] Total Solver Time: 0.6644313335418701
[error] Total Time Symmetries: 0
[error] Total Blocked Models: 0
[error] Total Solver Time: 0.518918514251709
[error] Total Time Symmetries: 0
[error] Total Blocked Models: 0
[error] Total Solver Time: 0.5260210037231445
[error] Total Time Symmetries: 0
[error] Total Blocked Models: 0
[error] Total Solver Time: 0.5157337188720703
[error] Total Time Symmetries: 0
[error] Total Blocked Models: 0
[error] Total Solver Time: 0.5244784355163574
[error] Total Time Symmetries: 0
[error] Total Blocked Models: 0
[error] Total Solver Time: 0.7804849147796631
[error] Total Time Symmetries: 0
[error] Total Blocked Models: 0
[error] Total Solver Time: 0.5942275524139404
[error] Total Time Symmetries: 0
[error] Total Blocked Models: 0
[error] Total Solver Time: 0.591804027557373
[error] Total Time Symmetries: 0
[error] Total Blocked Models: 0
[error] Total Solver Time: 0.6009440422058105
[error] Total Time Symmetries: 0
[error] Total Blocked Models: 0
[error] Total Solver Time: 0.5982298851013184
[error] Total Time Symmetries: 0
[error] Total Blocked Models: 0
[error] Total Solver Time: 0.9029035568237305
[error] Total Time Symmetries: 0
[error] Total Blocked Models: 0
[error] Total Solver Time: 0.6710965633392334
[error] Total Time Symmetries: 0
[error] Total Blocked Models: 0
[error] Total Solver Time: 0.6698479652404785
[error] Total Time Symmetries: 0
[error] Total Blocked Models: 0
[error] Total Solver Time: 0.6746742725372314
[error] Total Time Symmetries: 0
[error] Total Blocked Models: 0
[error] Total Solver Time: 0.6685500144958496
[error] Total Time Symmetries: 0
[error] Total Blocked Models: 0
[error] Total Solver Time: 1.027360439300537
[error] Total Time Symmetries: 0
[error] Total Blocked Models: 0
[error] Total Solver Time: 0.7484769821166992
[error] Total Time Symmetries: 0
[error] Total Blocked Models: 0
[error] Total Solver Time: 0.746685266494751
[error] Total Time Symmetries: 0
[error] Total Blocked Models: 0
[error] Total Solver Time: 0.7447559833526611
[error] Total Time Symmetries: 0
[error] Total Blocked Models: 0
[error] Total Solver Time: 0.7484855651855469
[error] Total Time Symmetries: 0
[error] Total Blocked Models: 0
[error] Total Solver Time: 0.8248565196990967
[error] Total Time Symmetries: 0
[error] Total Blocked Models: 0
[error] Total Solver Time: 1.1442761421203613
[error] Total Time Symmetries: 0
[error] Total Blocked Models: 0
[error] Total Solver Time: 0.8197214603424072
[error] Total Time Symmetries: 0
[error] Total Blocked Models: 0
[error] Total Solver Time: 0.819542646408081
[error] Total Time Symmetries: 0
[error] Total Blocked Models: 0
[error] Total Solver Time: 0.8222060203552246
[error] Total Time Symmetries: 0
[error] Total Blocked Models: 0
[error] Total Solver Time: 0.9007036685943604
[error] Total Time Symmetries: 0
[error] Total Blocked Models: 0
[error] Total Solver Time: 1.2646782398223877
[error] Total Time Symmetries: 0
[error] Total Blocked Models: 0
[error] Total Solver Time: 0.8921105861663818
[error] Total Time Symmetries: 0
[error] Total Blocked Models: 0
[error] Total Solver Time: 0.8977751731872559
[error] Total Time Symmetries: 0
[error] Total Blocked Models: 0
[error] Total Solver Time: 0.8930199146270752
[error] Total Time Symmetries: 0
[error] Total Blocked Models: 0
[error] Total Solver Time: 1.3902990818023682
[error] Total Time Symmetries: 0
[error] Total Blocked Models: 0
[error] Total Solver Time: 0.9744539260864258
[error] Total Time Symmetries: 0
[error] Total Blocked Models: 0
[error] Total Solver Time: 0.9682796001434326
[error] Total Time Symmetries: 0
[error] Total Blocked Models: 0
[error] Total Solver Time: 0.9729037284851074
[error] Total Time Symmetries: 0
[error] Total Blocked Models: 0
[error] Total Solver Time: 0.9684619903564453
[error] Total Time Symmetries: 0
[error] Total Blocked Models: 0
[error] Total Solver Time: 1.5225944519042969
[error] Total Time Symmetries: 0
[error] Total Blocked Models: 0
[error] Total Solver Time: 1.050910234451294
[error] Total Time Symmetries: 0
[error] Total Blocked Models: 0
[error] Total Solver Time: 1.0435712337493896
[error] Total Time Symmetries: 0
[error] Total Blocked Models: 0
[error] Total Solver Time: 1.0490622520446777
[error] Total Time Symmetries: 0
[error] Total Blocked Models: 0
[error] Total Solver Time: 1.656977653503418
[error] Total Time Symmetries: 0
[error] Total Blocked Models: 0
[error] Total Solver Time: 1.0446422100067139
[error] Total Time Symmetries: 0
[error] Total Blocked Models: 0
[error] Total Solver Time: 1.6839241981506348
[error] Total Time Symmetries: 0
[error] Total Blocked Models: 0
[error] Total Time: 43.24846625328064
[info] Solution found: select(left_join(inner_join3(@param1, @param0, @param2), summariseGrouped(@param0, n = n(), P_id)), S_name,n, distinct)
[error] Total Solver Time: 1.1283812522888184
[error] Total Time Symmetries: 0
[error] Total Blocked Models: 0
[debug] Solution found using process 0: Config(disabled=[], alt_empty_pos=False, shuffle_cols=False, z3_sat_phase='caching', z3_QF_FD=False)

------------------------------------- R Solution ---------------------------------------

con <- DBI::dbConnect(RSQLite::SQLite(), ":memory:")
input1 <- read.table("tests-examples/cp19/tables/21-1.txt", sep=",", header=T)
input1 <- copy_to(con, input1)
input2 <- read.table("tests-examples/cp19/tables/21-2.txt", sep=",", header=T)
input2 <- copy_to(con, input2)
input3 <- read.table("tests-examples/cp19/tables/21-3.txt", sep=",", header=T)
input3 <- copy_to(con, input3)
expected_output <- read.table("tests-examples/cp19/tables/51.out", sep =",", header=T)

RET_DF3011 <- inner_join(inner_join(input2, input1), input3)
RET_DF3012 <- input1 %>% group_by(P_id) %>% summarise(n = n())
RET_DF3013 <- left_join(RET_DF3011, RET_DF3012)
RET_DF3014 <- RET_DF3013 %>% ungroup() %>% select(S_name,n) %>% distinct()


+++++++++++++++++++++++++++++++++++++ SQL Solution +++++++++++++++++++++++++++++++++++++

SELECT DISTINCT `S_name`,
                `n`
FROM
  (SELECT `P_id`,
          `color`,
          `S_key`,
          `S_name`,
          `n`
   FROM
     (SELECT `P_id`,
             `color`,
             `S_key`,
             `S_name`
      FROM
        (SELECT `P_id`,
                `color`,
                `S_key`
         FROM `input2` AS `LHS`
         INNER JOIN `input1` AS `RHS` ON (`LHS`.`P_id` = `RHS`.`P_id`)) AS `LHS`
      INNER JOIN `input3` AS `RHS` ON (`LHS`.`S_key` = `RHS`.`S_key`)) AS `LHS`
   LEFT JOIN
     (SELECT `P_id`,
             COUNT() AS `n`
      FROM `input1`
      GROUP BY `P_id`) AS `RHS` ON (`LHS`.`P_id` = `RHS`.`P_id`))
