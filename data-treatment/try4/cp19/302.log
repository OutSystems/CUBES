[info] Parsing specification...
[info] Parsing specification...
[info] Parsing specification...
[info] Parsing specification...
[debug] Reading input files...
[info] Parsing specification...
[debug] Reading input files...
[debug] Reading input files...
[debug] Reading input files...
[debug] Reading input files...
[debug] Generating DSL...
[info] Parsing succeeded
[info] Building synthesizer...
[info] Lines of Code: 1
[debug] Generating DSL...
[debug] Generating DSL...
[debug] Generating DSL...
[debug] Generating DSL...
[info] Parsing succeeded
[info] Building synthesizer...
[info] Lines of Code: 1
[info] Parsing succeeded
[info] Building synthesizer...
[info] Lines of Code: 1
[info] Parsing succeeded
[info] Building synthesizer...
[info] Lines of Code: 1
[info] Parsing succeeded
[info] Building synthesizer...
[info] Lines of Code: 1
[error] Number of Nodes: 5 
[error] Number of Variables: 6
[error] Number of Constraints: 55
[error] Time spent encoding: 0.035939693450927734
[error] UNSAT : There is no solution for current depth (loc=0), try to increase it (e.g. loc=1).
[info] Synthesizing programs...
[error] Total Time: 3.719329833984375e-05
[error] Total Solver Time: 2.5987625122070312e-05
[error] Total Time Symmetries: 0
[error] Total Blocked Models: 0
[info] No more queries to be tested. Solution not found!
[info] Increasing the number of lines of code.
[info] Lines of Code: 2
[error] Number of Nodes: 5 
[error] Number of Variables: 6
[error] Number of Constraints: 55
[error] Time spent encoding: 0.03747057914733887
[error] Number of Nodes: 5 
[error] Number of Variables: 6
[error] Number of Constraints: 55
[error] Time spent encoding: 0.03706550598144531
[error] UNSAT : There is no solution for current depth (loc=0), try to increase it (e.g. loc=1).
[info] Synthesizing programs...
[error] Total Time: 3.981590270996094e-05
[error] Total Solver Time: 2.6226043701171875e-05
[error] Total Time Symmetries: 0
[error] Total Blocked Models: 0
[info] No more queries to be tested. Solution not found!
[info] Increasing the number of lines of code.
[info] Lines of Code: 2
[error] UNSAT : There is no solution for current depth (loc=0), try to increase it (e.g. loc=1).
[info] Synthesizing programs...
[error] Total Time: 3.719329833984375e-05
[error] Total Solver Time: 2.5510787963867188e-05
[error] Total Time Symmetries: 0
[error] Number of Nodes: 5 
[error] Total Blocked Models: 0
[error] Number of Variables: 6
[info] No more queries to be tested. Solution not found!
[error] Number of Constraints: 55
[info] Increasing the number of lines of code.
[info] Lines of Code: 2
[error] Time spent encoding: 0.03687238693237305
[error] Number of Nodes: 5 
[error] Number of Variables: 6
[error] Number of Constraints: 55
[error] Time spent encoding: 0.042537689208984375
[error] UNSAT : There is no solution for current depth (loc=0), try to increase it (e.g. loc=1).
[info] Synthesizing programs...
[error] Total Time: 4.458427429199219e-05
[error] Total Solver Time: 3.0040740966796875e-05
[error] Total Time Symmetries: 0
[error] Total Blocked Models: 0
[info] No more queries to be tested. Solution not found!
[info] Increasing the number of lines of code.
[info] Lines of Code: 2
[error] UNSAT : There is no solution for current depth (loc=0), try to increase it (e.g. loc=1).
[info] Synthesizing programs...
[error] Total Time: 0.007410526275634766
[error] Total Solver Time: 0.0073909759521484375
[error] Total Time Symmetries: 0
[error] Total Blocked Models: 0
[info] No more queries to be tested. Solution not found!
[info] Increasing the number of lines of code.
[info] Lines of Code: 2
[error] Number of Nodes: 10 
[error] Number of Variables: 16
[error] Number of Constraints: 149
[error] Time spent encoding: 0.08804202079772949
[error] UNSAT : There is no solution for current depth (loc=1), try to increase it (e.g. loc=2).
[info] Synthesizing programs...
[error] Total Time: 3.170967102050781e-05
[error] Total Solver Time: 2.5987625122070312e-05
[error] Total Time Symmetries: 0
[error] Total Blocked Models: 0
[info] No more queries to be tested. Solution not found!
[info] Increasing the number of lines of code.
[info] Lines of Code: 3
[error] Number of Nodes: 10 
[error] Number of Nodes: 10 
[error] Number of Variables: 16
[error] Number of Variables: 16
[error] Number of Constraints: 149
[error] Number of Constraints: 149
[error] Time spent encoding: 0.08375740051269531
[error] Time spent encoding: 0.08420777320861816
[error] Number of Nodes: 10 
[error] Number of Variables: 16
[error] Number of Constraints: 149
[error] Time spent encoding: 0.08356094360351562
[error] UNSAT : There is no solution for current depth (loc=1), try to increase it (e.g. loc=2).
[error] UNSAT : There is no solution for current depth (loc=1), try to increase it (e.g. loc=2).
[info] Synthesizing programs...
[error] Total Time: 3.1948089599609375e-05
[error] Total Solver Time: 2.574920654296875e-05
[info] Synthesizing programs...
[error] Total Time Symmetries: 0
[error] Total Blocked Models: 0
[error] Total Time: 3.314018249511719e-05
[info] No more queries to be tested. Solution not found!
[error] Total Solver Time: 2.6941299438476562e-05
[info] Increasing the number of lines of code.
[error] Total Time Symmetries: 0
[info] Lines of Code: 3
[error] Total Blocked Models: 0
[info] No more queries to be tested. Solution not found!
[info] Increasing the number of lines of code.
[info] Lines of Code: 3
[error] UNSAT : There is no solution for current depth (loc=1), try to increase it (e.g. loc=2).
[info] Synthesizing programs...
[error] Total Time: 3.409385681152344e-05
[error] Total Solver Time: 2.8371810913085938e-05
[error] Total Time Symmetries: 0
[error] Total Blocked Models: 0
[info] No more queries to be tested. Solution not found!
[info] Increasing the number of lines of code.
[info] Lines of Code: 3
[error] Number of Nodes: 10 
[error] Number of Variables: 16
[error] Number of Constraints: 149
[error] Time spent encoding: 0.09079551696777344
[error] UNSAT : There is no solution for current depth (loc=1), try to increase it (e.g. loc=2).
[info] Synthesizing programs...
[error] Total Time: 0.014931917190551758
[error] Total Solver Time: 0.01491856575012207
[error] Total Time Symmetries: 0
[error] Total Blocked Models: 0
[info] No more queries to be tested. Solution not found!
[info] Increasing the number of lines of code.
[info] Lines of Code: 3
[error] Number of Nodes: 15 
[error] Number of Variables: 30
[error] Number of Constraints: 285
[error] Time spent encoding: 0.15633726119995117
[error] Number of Nodes: 15 
[error] Number of Variables: 30
[error] Number of Constraints: 285
[error] Time spent encoding: 0.15162110328674316
[error] Number of Nodes: 15 
[error] Number of Variables: 30
[error] Number of Constraints: 285
[error] Time spent encoding: 0.15202784538269043
[error] Number of Nodes: 15 
[error] Number of Variables: 30
[error] Number of Constraints: 285
[error] Time spent encoding: 0.15218210220336914
[info] Synthesizing programs...
[info] Synthesizing programs...
[info] Synthesizing programs...
[info] Synthesizing programs...
[error] Number of Nodes: 15 
[error] Number of Variables: 30
[error] Number of Constraints: 285
[error] Time spent encoding: 0.15956544876098633
[info] Synthesizing programs...
[error] Total Solver Time: 0.06403875350952148
[error] Total Time Symmetries: 0
[error] Total Blocked Models: 0
[error] Total Solver Time: 0.0655064582824707
[error] Total Time Symmetries: 0
[error] Total Blocked Models: 0
[error] Total Solver Time: 0.0610654354095459
[error] Total Time Symmetries: 0
[error] Total Blocked Models: 0
[error] Total Solver Time: 0.06064438819885254
[error] Total Time Symmetries: 0
[error] Total Blocked Models: 0
[error] Total Solver Time: 0.11311769485473633
[error] Total Time Symmetries: 0
[error] Total Blocked Models: 0
[error] Total Solver Time: 0.12906360626220703
[error] Total Time Symmetries: 0
[error] Total Blocked Models: 0
[error] Total Solver Time: 0.13052010536193848
[error] Total Time Symmetries: 0
[error] Total Blocked Models: 0
[error] Total Solver Time: 0.12229156494140625
[error] Total Time Symmetries: 0
[error] Total Blocked Models: 0
[error] Total Solver Time: 0.18753886222839355
[error] Total Time Symmetries: 0
[error] Total Blocked Models: 0
[error] Total Solver Time: 0.1210794448852539
[error] Total Time Symmetries: 0
[error] Total Blocked Models: 0
[error] Total Solver Time: 0.19294238090515137
[error] Total Time Symmetries: 0
[error] Total Blocked Models: 0
[error] Total Solver Time: 0.19533395767211914
[error] Total Time Symmetries: 0
[error] Total Blocked Models: 0
[error] Total Solver Time: 0.1836841106414795
[error] Total Time Symmetries: 0
[error] Total Blocked Models: 0
[error] Total Solver Time: 0.18207049369812012
[error] Total Time Symmetries: 0
[error] Total Blocked Models: 0
[error] Total Solver Time: 0.25876736640930176
[error] Total Time Symmetries: 0
[error] Total Blocked Models: 0
[error] Total Solver Time: 0.2573707103729248
[error] Total Time Symmetries: 0
[error] Total Blocked Models: 0
[error] Total Solver Time: 0.2603118419647217
[error] Total Time Symmetries: 0
[error] Total Blocked Models: 0
[error] Total Solver Time: 0.24599146842956543
[error] Total Time Symmetries: 0
[error] Total Blocked Models: 0
[error] Total Solver Time: 0.2428276538848877
[error] Total Time Symmetries: 0
[error] Total Blocked Models: 0
[error] Total Solver Time: 0.33090925216674805
[error] Total Time Symmetries: 0
[error] Total Blocked Models: 0
[error] Total Solver Time: 0.3220057487487793
[error] Total Time Symmetries: 0
[error] Total Blocked Models: 0
[error] Total Solver Time: 0.3248012065887451
[error] Total Time Symmetries: 0
[error] Total Blocked Models: 0
[error] Total Solver Time: 0.3064558506011963
[error] Total Time Symmetries: 0
[error] Total Blocked Models: 0
[error] Total Solver Time: 0.3036794662475586
[error] Total Time Symmetries: 0
[error] Total Blocked Models: 0
[error] Total Solver Time: 0.40335726737976074
[error] Total Time Symmetries: 0
[error] Total Blocked Models: 0
[error] Total Solver Time: 0.38539981842041016
[error] Total Time Symmetries: 0
[error] Total Blocked Models: 0
[error] Total Solver Time: 0.3889343738555908
[error] Total Time Symmetries: 0
[error] Total Blocked Models: 0
[error] Total Solver Time: 0.36660337448120117
[error] Total Time Symmetries: 0
[error] Total Blocked Models: 0
[error] Total Solver Time: 0.36369991302490234
[error] Total Time Symmetries: 0
[error] Total Blocked Models: 0
[error] Total Solver Time: 0.4782712459564209
[error] Total Time Symmetries: 0
[error] Total Blocked Models: 0
[error] Total Solver Time: 0.44907307624816895
[error] Total Time Symmetries: 0
[error] Total Blocked Models: 0
[error] Total Solver Time: 0.42791748046875
[error] Total Time Symmetries: 0
[error] Total Blocked Models: 0
[error] Total Solver Time: 0.4236137866973877
[error] Total Time Symmetries: 0
[error] Total Blocked Models: 0
[error] Total Solver Time: 0.45095252990722656
[error] Total Time Symmetries: 0
[error] Total Blocked Models: 0
[error] Total Time: 19.115599155426025
[error] Total Solver Time: 0.46299314498901367
[error] Total Time Symmetries: 0
[error] Total Blocked Models: 0
[info] No more queries to be tested. Solution not found!
[info] Increasing the number of lines of code.
[info] Lines of Code: 4
[error] Total Time: 19.18985104560852
[error] Total Solver Time: 0.4404757022857666
[error] Total Time Symmetries: 0
[error] Total Blocked Models: 0
[info] No more queries to be tested. Solution not found!
[info] Increasing the number of lines of code.
[info] Lines of Code: 4
[error] Total Solver Time: 0.5514039993286133
[error] Total Time Symmetries: 0
[error] Total Blocked Models: 0
[error] Number of Nodes: 20 
[error] Number of Variables: 48
[error] Number of Constraints: 463
[error] Time spent encoding: 0.23742890357971191
[info] Synthesizing programs...
[error] Number of Nodes: 20 
[error] Number of Variables: 48
[error] Number of Constraints: 463
[error] Time spent encoding: 0.24256277084350586
[info] Synthesizing programs...
[error] Total Time: 19.534326553344727
[error] Total Solver Time: 0.4357333183288574
[error] Total Time Symmetries: 0
[error] Total Blocked Models: 0
[info] No more queries to be tested. Solution not found!
[info] Increasing the number of lines of code.
[info] Lines of Code: 4
[error] Total Time: 19.54943561553955
[error] Total Solver Time: 0.46544432640075684
[error] Total Time Symmetries: 0
[error] Total Blocked Models: 0
[info] No more queries to be tested. Solution not found!
[info] Increasing the number of lines of code.
[info] Lines of Code: 4
[error] Number of Nodes: 20 
[error] Number of Variables: 48
[error] Number of Constraints: 463
[error] Time spent encoding: 0.24144220352172852
[error] Number of Nodes: 20 
[error] Number of Variables: 48
[error] Number of Constraints: 463
[error] Time spent encoding: 0.24080443382263184
[info] Synthesizing programs...
[info] Synthesizing programs...
[error] Total Time: 19.746211290359497
[error] Total Solver Time: 0.5656743049621582
[error] Total Time Symmetries: 0
[error] Total Blocked Models: 0
[info] No more queries to be tested. Solution not found!
[info] Increasing the number of lines of code.
[info] Lines of Code: 4
[error] Number of Nodes: 20 
[error] Number of Variables: 48
[error] Number of Constraints: 463
[error] Time spent encoding: 0.2529449462890625
[info] Synthesizing programs...
[error] Total Solver Time: 0.07473134994506836
[error] Total Time Symmetries: 0
[error] Total Blocked Models: 0
[error] Total Solver Time: 0.07764720916748047
[error] Total Time Symmetries: 0
[error] Total Blocked Models: 0
[error] Total Solver Time: 0.07856321334838867
[error] Total Time Symmetries: 0
[error] Total Blocked Models: 0
[error] Total Solver Time: 0.1507575511932373
[error] Total Time Symmetries: 0
[error] Total Blocked Models: 0
[error] Total Solver Time: 0.06171250343322754
[error] Total Time Symmetries: 0
[error] Total Blocked Models: 0
[error] Total Solver Time: 0.1485440731048584
[error] Total Time Symmetries: 0
[error] Total Blocked Models: 0
[error] Total Solver Time: 0.15179014205932617
[error] Total Time Symmetries: 0
[error] Total Blocked Models: 0
[error] Total Solver Time: 0.15450787544250488
[error] Total Time Symmetries: 0
[error] Total Blocked Models: 0
[error] Total Solver Time: 0.23621416091918945
[error] Total Time Symmetries: 0
[error] Total Blocked Models: 0
[error] Total Solver Time: 0.13609528541564941
[error] Total Time Symmetries: 0
[error] Total Blocked Models: 0
[error] Total Solver Time: 0.22274088859558105
[error] Total Time Symmetries: 0
[error] Total Blocked Models: 0
[error] Total Solver Time: 0.22540521621704102
[error] Total Time Symmetries: 0
[error] Total Blocked Models: 0
[error] Total Solver Time: 0.23088860511779785
[error] Total Time Symmetries: 0
[error] Total Blocked Models: 0
[error] Total Solver Time: 0.3251168727874756
[error] Total Time Symmetries: 0
[error] Total Blocked Models: 0
[error] Total Solver Time: 0.21174860000610352
[error] Total Time Symmetries: 0
[error] Total Blocked Models: 0
[error] Total Solver Time: 0.2978360652923584
[error] Total Time Symmetries: 0
[error] Total Blocked Models: 0
[error] Total Solver Time: 0.30010366439819336
[error] Total Time Symmetries: 0
[error] Total Blocked Models: 0
[error] Total Solver Time: 0.30477333068847656
[error] Total Time Symmetries: 0
[error] Total Blocked Models: 0
[error] Total Solver Time: 0.43814682960510254
[error] Total Time Symmetries: 0
[error] Total Blocked Models: 0
[error] Total Solver Time: 0.37371063232421875
[error] Total Time Symmetries: 0
[error] Total Blocked Models: 0
[error] Total Solver Time: 0.37680745124816895
[error] Total Time Symmetries: 0
[error] Total Blocked Models: 0
[error] Total Solver Time: 0.2882206439971924
[error] Total Time Symmetries: 0
[error] Total Blocked Models: 0
[error] Total Solver Time: 0.3785436153411865
[error] Total Time Symmetries: 0
[error] Total Blocked Models: 0
[error] Total Solver Time: 0.5488317012786865
[error] Total Time Symmetries: 0
[error] Total Blocked Models: 0
[error] Total Solver Time: 0.4491097927093506
[error] Total Time Symmetries: 0
[error] Total Blocked Models: 0
[error] Total Solver Time: 0.4471139907836914
[error] Total Time Symmetries: 0
[error] Total Blocked Models: 0
[error] Total Solver Time: 0.36450815200805664
[error] Total Time Symmetries: 0
[error] Total Blocked Models: 0
[error] Total Solver Time: 0.4535379409790039
[error] Total Time Symmetries: 0
[error] Total Blocked Models: 0
[error] Total Solver Time: 0.5231027603149414
[error] Total Time Symmetries: 0
[error] Total Blocked Models: 0
[error] Total Solver Time: 0.6641643047332764
[error] Total Time Symmetries: 0
[error] Total Blocked Models: 0
[error] Total Solver Time: 0.5220491886138916
[error] Total Time Symmetries: 0
[error] Total Blocked Models: 0
[error] Total Solver Time: 0.4407351016998291
[error] Total Time Symmetries: 0
[error] Total Blocked Models: 0
[error] Total Solver Time: 0.5298583507537842
[error] Total Time Symmetries: 0
[error] Total Blocked Models: 0
[error] Total Solver Time: 0.7795064449310303
[error] Total Time Symmetries: 0
[error] Total Blocked Models: 0
[error] Total Solver Time: 0.5984315872192383
[error] Total Time Symmetries: 0
[error] Total Blocked Models: 0
[error] Total Solver Time: 0.5974905490875244
[error] Total Time Symmetries: 0
[error] Total Blocked Models: 0
[error] Total Solver Time: 0.5158779621124268
[error] Total Time Symmetries: 0
[error] Total Blocked Models: 0
[error] Total Solver Time: 0.606360912322998
[error] Total Time Symmetries: 0
[error] Total Blocked Models: 0
[error] Total Solver Time: 0.6742227077484131
[error] Total Time Symmetries: 0
[error] Total Blocked Models: 0
[error] Total Solver Time: 0.901137113571167
[error] Total Time Symmetries: 0
[error] Total Blocked Models: 0
[error] Total Solver Time: 0.6711409091949463
[error] Total Time Symmetries: 0
[error] Total Blocked Models: 0
[error] Total Solver Time: 0.593919038772583
[error] Total Time Symmetries: 0
[error] Total Blocked Models: 0
[error] Total Solver Time: 0.7501778602600098
[error] Total Time Symmetries: 0
[error] Total Blocked Models: 0
[error] Total Solver Time: 0.6805922985076904
[error] Total Time Symmetries: 0
[error] Total Blocked Models: 0
[error] Total Solver Time: 1.0255391597747803
[error] Total Time Symmetries: 0
[error] Total Blocked Models: 0
[error] Total Solver Time: 0.6716780662536621
[error] Total Time Symmetries: 0
[error] Total Blocked Models: 0
[error] Total Solver Time: 0.7352449893951416
[error] Total Time Symmetries: 0
[error] Total Blocked Models: 0
[error] Total Solver Time: 0.8254590034484863
[error] Total Time Symmetries: 0
[error] Total Blocked Models: 0
[error] Total Solver Time: 1.1438746452331543
[error] Total Time Symmetries: 0
[error] Total Blocked Models: 0
[error] Total Solver Time: 0.7548768520355225
[error] Total Time Symmetries: 0
[error] Total Blocked Models: 0
[error] Total Solver Time: 0.8086833953857422
[error] Total Time Symmetries: 0
[error] Total Blocked Models: 0
[error] Total Solver Time: 0.7456684112548828
[error] Total Time Symmetries: 0
[error] Total Blocked Models: 0
[error] Total Solver Time: 0.9017741680145264
[error] Total Time Symmetries: 0
[error] Total Blocked Models: 0
[error] Total Solver Time: 1.263002872467041
[error] Total Time Symmetries: 0
[error] Total Blocked Models: 0
[error] Total Solver Time: 0.8319351673126221
[error] Total Time Symmetries: 0
[error] Total Blocked Models: 0
[error] Total Solver Time: 0.884291410446167
[error] Total Time Symmetries: 0
[error] Total Blocked Models: 0
[error] Total Solver Time: 0.8229942321777344
[error] Total Time Symmetries: 0
[error] Total Blocked Models: 0
[error] Total Solver Time: 0.9784700870513916
[error] Total Time Symmetries: 0
[error] Total Blocked Models: 0
[error] Total Solver Time: 1.3898234367370605
[error] Total Time Symmetries: 0
[error] Total Blocked Models: 0
[error] Total Solver Time: 0.9092249870300293
[error] Total Time Symmetries: 0
[error] Total Blocked Models: 0
[error] Total Solver Time: 0.960883378982544
[error] Total Time Symmetries: 0
[error] Total Blocked Models: 0
[error] Total Solver Time: 0.9012815952301025
[error] Total Time Symmetries: 0
[error] Total Blocked Models: 0
[error] Total Solver Time: 1.0543901920318604
[error] Total Time Symmetries: 0
[error] Total Blocked Models: 0
[error] Total Solver Time: 1.5222299098968506
[error] Total Time Symmetries: 0
[error] Total Blocked Models: 0
[error] Total Solver Time: 1.0372657775878906
[error] Total Time Symmetries: 0
[error] Total Blocked Models: 0
[error] Total Solver Time: 0.9860579967498779
[error] Total Time Symmetries: 0
[error] Total Blocked Models: 0
[error] Total Solver Time: 0.9796628952026367
[error] Total Time Symmetries: 0
[error] Total Blocked Models: 0
[error] Total Solver Time: 1.6575744152069092
[error] Total Time Symmetries: 0
[error] Total Blocked Models: 0
[error] Total Solver Time: 1.1313996315002441
[error] Total Time Symmetries: 0
[error] Total Blocked Models: 0
[error] Total Solver Time: 1.6848607063293457
[error] Total Time Symmetries: 0
[error] Total Blocked Models: 0
[error] Total Time: 43.10089373588562
[info] Solution found: select(left_join(inner_join3(@param1, @param0, @param2), summariseGrouped(@param0, n = n(), P_id)), S_name,n, distinct)
[error] Total Solver Time: 1.1156132221221924
[error] Total Time Symmetries: 0
[error] Total Blocked Models: 0
[debug] Solution found using process 0: Config(disabled=[], alt_empty_pos=False, shuffle_cols=False, z3_sat_phase='caching', z3_QF_FD=False)
[error] Total Solver Time: 1.0628948211669922
[error] Total Time Symmetries: 0
[error] Total Blocked Models: 0

------------------------------------- R Solution ---------------------------------------

con <- DBI::dbConnect(RSQLite::SQLite(), ":memory:")
input1 <- read.table("tests-examples/cp19/tables/21-1.txt", sep=",", header=T)
input1 <- copy_to(con, input1)
input2 <- read.table("tests-examples/cp19/tables/21-2.txt", sep=",", header=T)
input2 <- copy_to(con, input2)
input3 <- read.table("tests-examples/cp19/tables/21-3.txt", sep=",", header=T)
input3 <- copy_to(con, input3)
expected_output <- read.table("tests-examples/cp19/tables/51.out", sep =",", header=T)

RET_DF3011 <- inner_join(inner_join(input2, input1), input3)
RET_DF3012 <- input1 %>% group_by(P_id) %>% summarise(n = n())
RET_DF3013 <- left_join(RET_DF3011, RET_DF3012)
RET_DF3014 <- RET_DF3013 %>% ungroup() %>% select(S_name,n) %>% distinct()


+++++++++++++++++++++++++++++++++++++ SQL Solution +++++++++++++++++++++++++++++++++++++

SELECT DISTINCT `S_name`,
                `n`
FROM
  (SELECT `P_id`,
          `color`,
          `S_key`,
          `S_name`,
          `n`
   FROM
     (SELECT `P_id`,
             `color`,
             `S_key`,
             `S_name`
      FROM
        (SELECT `P_id`,
                `color`,
                `S_key`
         FROM `input2` AS `LHS`
         INNER JOIN `input1` AS `RHS` ON (`LHS`.`P_id` = `RHS`.`P_id`)) AS `LHS`
      INNER JOIN `input3` AS `RHS` ON (`LHS`.`S_key` = `RHS`.`S_key`)) AS `LHS`
   LEFT JOIN
     (SELECT `P_id`,
             COUNT() AS `n`
      FROM `input1`
      GROUP BY `P_id`) AS `RHS` ON (`LHS`.`P_id` = `RHS`.`P_id`))
